This document attempts to describe all of the steps and nuances of deploying Net Central onto different operating systems.
It is best to get Net Central running against an APRS-IS server then add radio support.  This is to prove that Net Central is working before introducing the nuances of each radio.

For Linux, this guide assumes you are NOT running as root.

You can also run Net Central in a container environment such as Docker Desktop.


Overview

The following steps are expected for all operating systems:
  Getting Started
  Install Java 21 JDK
  Install MySQL (preferrably 8)
  Initialize MySQL for Net Central
  Getting Net Central on your system
    Using Net Central in a container environment
    Downloading pre-built components
    Building Net Central from source code
      Install Maven
      Get Net Central source code
      Install VS Code (optional)
      Build Net Central
  Host configuration
    Configure Net Central environment variables
    Installing NodeJS
    Pre-run configuration steps
  Run Net Central
  Configure Net Central
  Conclusion


Getting Started

If running on Linux, make sure you have all of the most recent updates by running the following command: sudo apt update / sudo yum update
If running on Microsoft Windows, make sure you have applied all available updates.


Automated installations

To automatically install Net Central on a Linux system, use the netcentral_installer.sh bash script to install Net Central from source or from pre-built components.
It will automatically install all dependencies.

There is no automated installation for Microsoft Windows.


Install Java 21 JDK

The Java 21 JDK can be downloaded from https://www.oracle.com/java/technologies/downloads/#java21
Be sure that JAVA_HOME is properly set to allow Maven and Net Central to work later in this process.

The easiest way to install Java 21 on Linux is to run the following command:   sudo apt install default-jdk -y or sudo yum install java-21-openjdk-devel -y


Install MySQL

MySQL can be downloaded from https://dev.mysql.com/downloads/mysql/
I have only tested with MySQL 8.

The easiest way to install MySQL on Linux is to run the following command: sudo apt install mariadb-server -y or sudo yum install mariadb-server -y


Initialize MySQL

Once MySQL is installed and running, you need to create the schema/database and the Net Central user to access it.

The easiest way to execute this SQL against a MySQL server on Linux is to run the following command: sudo mysql -u root -p
Note: there is no password by default

The following SQL should be executed against the MySQL server:

  create schema netcentral;
  create user 'netcentral'@'localhost' IDENTIFIED BY 'netcentral';
  grant all privileges on netcentral.* to 'netcentral'@'localhost';
  flush privileges;

If you wish to change the default databasename / username / password from netcentral / netcentral, the syntax is as follows:

  create schema databasename;
  create user 'your_username'@'localhost' IDENTIFIED BY 'your_password';
  grant all privileges on databasename.* to 'your_username'@'localhost';
  flush privileges;

Make note of what you use for later steps when setting environment variables.


Getting Net Central on your system

There are two ways you can get up and running on Net Central - building from source, or downloading pre-built components from Github.


Using Net Central in a container environment

Net Central can be run within a container environment such as Docker Desktop.

Download the netcentral-docker-image-build-scripts-*.zip artifact as mentioned in the next section and follow the instructions there. 


Downloading pre-built components

With a web browser, go to https://github.com/kc1vmz/netcentral/releases and look for the latest release.
Click on that release to see the list of components and artifacts you can download.
The necessary downloads are:
netcentral-documents-*.zip
netcentral-server-*.jar
netcentral-ui-*.zip
transceiver-aprsis-*.jar

Optional module downloads are:
transceiver-agw-*.jar
transceiver-kenwood-*.jar
transceiver-kiss-1.0.10.jar

For running Net Central in containers like Docker Desktop:
netcentral-docker-image-build-scripts-*.zip



Building Net Central from source code

There are several steps necessary to build Net Central from source code.


Install Maven

Maven is a build tool used to build the Java components of Net Central.

To download and install Maven, see https://maven.apache.org/download.cgi
On Linux, the easiest way is to run :
  sudo apt install maven -y
On Windows, download from the above link and install.


Get Net Central source code

Net Central source code is available on Github at https://github.com/kc1vmz/netcentral

To download the source code, select the options from the green Code button.

If you wish to download a TAR or ZIP file of sources without the need of a git client, select the latest source from dialog that popped up.
Or select the specific tag for the code you with to run and download the source.

To download a git client, see https://git-scm.com/ and follow the instructions for download and install.
The easiest way to to this on Linux is to run "sudo apt-get install git"

Quick notes on SSH downloads - to configure SSH downloads, perform the following commands to configure:
  git config --global user.name "your_git_username"
  git config --global user.email "your_email_address"
  ssh-keygen -t ed25519 -C "your_email_address"
Then copy the public key to Github via the "SSH and GPG keys" page on your account settings.


Install VS Code (optional)

If you choose to build and run in VS Code, you can download and install VS Code at https://code.visualstudio.com/download

The easiest way to download and install VS Code on Linux is to run the command: sudo apt install code
Run "code" from a terminal to start VS Code.


Build Net Central

To build Net Central using Maven, change directory to where you downloaded the Net Central source code and run "mvn clean install".
To build Net Central using VS Code, open the folder where Net Central source code was downloaded. It will automatically build all of the components.


Host configuration

Configure Net Central environment variables

At a minimum, the following environment variables need to be set:

  NETCENTRAL_APRS_CALLSIGN=YourCallsign
  NETCENTRAL_TRANS_APRSIS_PASSCODE=YourAPRSISpasscode
  NETCENTRAL_TRANS_APRSIS_CALLSIGN=YourCallsign
  NETCENTRAL_SERVER_TEMP_DIR=TempLocationForLogsAndReports

The following values should be used in future steps for initializing Net Central:
  NETCENTRAL_SERVER_USERNAME=serviceAccountName
  NETCENTRAL_SERVER_PASSWORD=serviceAccountPassword

  NETCENTRAL_TRANS_APRSIS_QUERY=r/42.222/-71.57/500
  This can represent an APRS-IS server query for your location. See https://www.aprs-is.net/javAPRSFilter.aspx for more details.

If you change the default netcentral/netcentral/netcentral database name/username/password when initializing MySQL, you must also set these environment variables:
  NETCENTRAL_SERVER_MYSQL_USERNAME=your_username
  NETCENTRAL_SERVER_MYSQL_PASSWORD=your_password
  NETCENTRAL_SERVER_MYSQL_DBNAME=databasename

Make sure that you create the following directories based on your value of TempLocationForLogsAndReports above
  mkdir %NETCENTRAL_SERVER_TEMP_DIR%
  mkdir %NETCENTRAL_SERVER_TEMP_DIR%\logs
  mkdir %NETCENTRAL_SERVER_TEMP_DIR%\reports

Make sure the environment variables are in the proper format for the operating system being used (forward vs back slashes).


Each additional transceiver (KISS, Kenwood, others) have their own environment variables as well.  See the end of this document for all variables.

For Windows, use the Advanced options to set system-wide environment variables so all apps (Command Prompt, VS Code, etc) can see them.
For Linux, add the variables into the /etc/environment file or equivalent for your Linux distribution.


Installing NodeJS

Make sure NodeJS is installed prior to starting the Net Central UI.
For Linux, change to the ./ui/net-central-ui directory and run:
  sudo apt install npm -y
  npm install


Pre-run configuration steps

Before running Net Central, there are a few operating system nuances you must be aware of and perform actions to mitigate.

Linux does not like port numbers in use below 1024 by non-root users, so the following steps must be performed to allow the UI to run properly: 
  sudo apt-get install libcap2-bin
  readlink -f `which node`     (gives you NODE_PATH)
  sudo setcap cap_net_bind_service=+ep NODE_PATH

You must open ports 8880 and 80 on server firewall to allow API and UI to work properly.

Optional - If you choose to make you Net Central UI available on a public IP address (beyond your local LAN), update .ui/net-central/.env file with public IP address in VITE_APP_API_URL


Run Net Central Server and UI

To run Net Central server from a command prompt / terminal, do the following:
  From the Net Central source code directory, change directory to ./netcentral-server/target
  Run "ls netcentral-server*.jar" or  "dir netcentral-server*.jar" to find the jar filename
  Run "java -jar filename.jar" using the file name (with version) from last step

To run Net Central APRS-IS transceiver from a command prompt / terminal, do the following:
  From the Net Central source code directory, change directory to ./transceivers/transceiver-aprsis/target
  Run  "ls transceiver*.jar" or "dir transceiver*.jar" to find the jar filename
  Run "java -jar filename.jar" using the file name (with version) from last step
  You will see log errors until you complete the configuration below.

To run Net Central UI from a command prompt / terminal on Linux, do the following:
  From the Net Central source code directory, change directory to ./ui/net-central-ui
  Run "npm run dev" to start the UI.

To run Net Central UI from a command prompt / terminal on Windows, do the following:
  Do all steps from a Linux subsystem such as Ubuntu or Debian
  From the Net Central source code directory, change directory to ./ui/net-central-ui
  Run "npm run dev" to start the UI.


Configure Net Central

Once Net Central is running you must complete the configuration to allow the software to function correctly.

Use a web browser to connect to app - http:\\localhost
You must register the owner user - see Register menu to left.  This user will be the system administrator unless others are promoted later.
You must register a service account - see the same Register menu to left, use service account username and password from environment variables above.  This allows the transceivers to talk to the server.
Once the two users are registered, log in as the owner user - see Login menu to left
Promote the service account - see Setup menu, select service account, Setup/Users - promote service account 
Enable the APRS-IS transceiver to send and receive data - see Setup menu - select APRS-IS transceiver, select Actions pane, press Enable Receive and confirm. Repeat for Transmit.


Adding radio support via KISS

Once you have proven that Net Central is working, you can add radio support.

Before starting, you can either stop the APRS-IS transceiver process, or leave it running and disable receive and transmit capabilities via the Setup menu.
You can optionally delete all of the previously heard APRS data using the Tools menu.

If using KISS via serial port, know the com port being used.
If using KISS via Bluetooth, pair the radio with the server and assign it a com port to be used.

Update the following environment variables
  NETCENTRAL_TRANS_KISS_TNC_BAUD=1200
  NETCENTRAL_TRANS_KISS_TNC_PORT=COM4

Ensure the port and baud rate values match what you are using.

To run Net Central KISS transceiver from a command prompt / terminal, do the following:
  From the Net Central source code directory, change directory to ./transceivers/transceiver-kiss/target
  Run  "ls transceiver*.jar" or "dir transceiver*.jar" to find the jar filename
  Run "java -jar filename.jar" using the file name (with version) from last step

Enable transceiver to send and receive - see Setup menu - select KISS transceiver, select Actions pane, press Enable Receive and confirm. Repeat for Transmit.



Conclusion

Net Central should now be up and running!

Verify that you are seeing new APRS objects using the Dashboard or Explorer pages in the UI.



Addendum - Environment variables

Mandatory
NETCENTRAL_SERVER_TMP_DIR
NETCENTRAL_SERVER_USERNAME
NETCENTRAL_SERVER_PASSWORD
NETCENTRAL_APRS_CALLSIGN


Optional
NETCENTRAL_SERVER_HTTP_PORT     default 8880
NETCENTRAL_SERVER_UPDATE_HTTP_PORT  default 8881
NETCENTRAL_SERVER_MYSQL_HOST      default localhost
NETCENTRAL_SERVER_MYSQL_PORT      defalut 3306
NETCENTRAL_SERVER_MYSQL_DBNAME    default netcentral
NETCENTRAL_SERVER_MYSQL_USERNAME  default netcentral
NETCENTRAL_SERVER_MYSQL_PASSWORD  default netcentral
NETCENTRAL_SERVER_FEDERATED       default true
NETCENTRAL_SERVER_LOG_RAW_PACKETS default false
VITE_APP_API_PORT                 default 8880
VITE_APP_UPDATE_PORT              default 8881
VITE_APP_API_HOST                 default not specified (defaults to Node.JS address)
VITE_APP_MAP_SERVER_URL           https://tile.openstreetmap.org/{z}/{x}/{y}.png



All transceivers
Optional
NETCENTRAL_SERVER_IP      default localhost
NETCENTRAL_SERVER_PORT    default 8880


AGW Transceiver
Optional
NETCENTRAL_AGW_HTTP_PORT          default 8004 (should be same)
NETCENTRAL_TRANS_AGW_PORT         default 8004 (should be same)
NETCENTRAL_TRANS_AGW_TNC_HOSTNAME default localhost
NETCENTRAL_TRANS_AGW_TNC_PORT     default 8000
NETCENTRAL_TRANS_AGW_TNC_CHANNEL  default 0


APRS-IS Transceiver

Mandatory
NETCENTRAL_TRANS_APRSIS_CALLSIGN
NETCENTRAL_TRANS_APRSIS_PASSCODE
NETCENTRAL_TRANS_APRSIS_QUERY

Optional
NETCENTRAL_TRANS_APRSIS_IS_SERVER default noam.aprs2.net
NETCENTRAL_TRANS_APRSIS_IS_PORT   default 14580
NETCENTRAL_TRANS_APRSIS_HTTP_PORT default 8002
NETCENTRAL_TRANS_APRSIS_PORT      default 8002


Kenwood Transceiver
Optional
NETCENTRAL_TRANS_KENWOOD_TNC_PORT   default COM6
NETCENTRAL_TRANS_KENWOOD_TNC_BAUD   default 9600
NETCENTRAL_TRANS_KENWOOD_HTTP_PORT  default 8003
NETCENTRAL_TRANS_KENWOOD_PORT       default 8003


KISS Transceiver
Mandatory
NETCENTRAL_TRANS_KISS_TNC_PORT
NETCENTRAL_TRANS_KISS_TNC_BAUD

# optional
NETCENTRAL_TRANS_KISS_DIGI_PATH     default WIDE2-1,WIDE1-1
NETCENTRAL_TRANS_KISS_HTTP_PORT     default 8005
NETCENTRAL_TRANS_KISS_TNC_INIT1
NETCENTRAL_TRANS_KISS_TNC_INIT2
NETCENTRAL_TRANS_KISS_TNC_HOST      default localhost


Test Transceiver
# optional
NETCENTRAL_TEST_HTTP_PORT       default 8010
